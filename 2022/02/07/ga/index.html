<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Global Accelerator Solution | Cheng's Blog</title><meta name="keywords" content="ga,global accelerator"><meta name="author" content="Cheng Zhang"><meta name="copyright" content="Cheng Zhang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Using Global Accelerator to speed up internet services worldwide Why Global AcceleratorInternational network connections usually have to cross lots of different Internet Service Providers(ISP). More n">
<meta property="og:type" content="article">
<meta property="og:title" content="Global Accelerator Solution">
<meta property="og:url" content="https://blog.mucdata.com/2022/02/07/ga/index.html">
<meta property="og:site_name" content="Cheng&#39;s Blog">
<meta property="og:description" content="Using Global Accelerator to speed up internet services worldwide Why Global AcceleratorInternational network connections usually have to cross lots of different Internet Service Providers(ISP). More n">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.mucdata.com/img/default_bg.png">
<meta property="article:published_time" content="2022-02-07T17:00:00.000Z">
<meta property="article:modified_time" content="2022-02-08T17:28:04.323Z">
<meta property="article:author" content="Cheng Zhang">
<meta property="article:tag" content="ga">
<meta property="article:tag" content="global accelerator">
<meta property="article:tag" content="cdn">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.mucdata.com/img/default_bg.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://blog.mucdata.com/2022/02/07/ga/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-149467267-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-149467267-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Global Accelerator Solution',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-08 18:28:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/default_bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Cheng's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Global Accelerator Solution</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-02-07T17:00:00.000Z" title="Created 2022-02-07 18:00:00">2022-02-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-02-08T17:28:04.323Z" title="Updated 2022-02-08 18:28:04">2022-02-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/network/">network</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Using-Global-Accelerator-to-speed-up-internet-services-worldwide"><a href="#Using-Global-Accelerator-to-speed-up-internet-services-worldwide" class="headerlink" title="Using Global Accelerator to speed up internet services worldwide"></a>Using Global Accelerator to speed up internet services worldwide</h1><hr>
<h1 id="Why-Global-Accelerator"><a href="#Why-Global-Accelerator" class="headerlink" title="Why Global Accelerator"></a>Why Global Accelerator</h1><p>International network connections usually have to cross lots of different Internet Service Providers(ISP). More network vendors in between often lead to a decreased quality of service in terms of latency and packet loss. Cross-border bandwidth demand between different geographic regions is steadily growing due to an ever increasing need of global system and application integration projects. Often, however, the public internet bandwidth is limited and not reliable without any quality of service guarantees. In such scenarios, Global Accelerator(GA) is a good choice to optimize the quality of service and latency. Based on the backbone network of Alibaba Cloud, a stable and low latency cross-region network can be created in just a few steps.<br><img src="ga_info.png"></p>
<h2 id="Cross-border-connectivity-to-Mainland-China"><a href="#Cross-border-connectivity-to-Mainland-China" class="headerlink" title="Cross-border connectivity to Mainland China"></a>Cross-border connectivity to Mainland China</h2><p>Network latency between Mainland China and the rest of the world is inevitable, because of the unpredictable network connection. Therefore, latency of cross-region (including cross-border) data transfer is about <a target="_blank" rel="noopener" href="https://docs.microsoft.com/de-de/azure/china/overview-connectivity-and-interoperability">at a factor three times bigger</a> than usual.<br>For enterprise services or cross-region services, cross-border connectivity will be the worst bottleneck. Main public cloud providers such as <a target="_blank" rel="noopener" href="https://docs.microsoft.com/de-de/azure/china/overview-connectivity-and-interoperability">Azure</a> and <a target="_blank" rel="noopener" href="https://aws.amazon.com/cn/blogs/networking-and-content-delivery/optimizing-performance-for-users-in-china-with-amazon-route-53-and-amazon-cloudfront/">AWS</a> can not provide a satisfying solution for this problem: using a Content Delivery Network(CDN) still results in content being transferred over public internet and also does not give any bandwidth guarantees.</p>
<h1 id="What-is-Global-Accelerator-GA"><a href="#What-is-Global-Accelerator-GA" class="headerlink" title="What is Global Accelerator (GA)"></a>What is Global Accelerator (GA)</h1><p>Global Accelerator is a network acceleration service, benefiting from the high-quality bandwidth and global transmission networks that are provided by Alibaba Cloud. Global Accelerator enables nearby access to the Internet and cross-region deployment of applications, improving the user experience of internet services. Global Accelerator features high network quality, high security, high availability, and low latency. In addition, Global Accelerator can be deployed and configured within several minutes, making service deployments faster and more agile.<br>You will find the technical documentation of GA here <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/doc-detail/153189.html">https://www.alibabacloud.com/help/en/doc-detail/153189.html</a>.<br><img src="ga_overview1.png"><br>Terms of GA:</p>
<ul>
<li><code>Accelerated IP</code> After you add a region to an acceleration area, GA assigns an accelerated IP address to the region. Clients can connect to the access point that is closest to the clients through the accelerated IP address. The access point receives client requests and forwards the requests to the Alibaba Cloud global network.</li>
<li><code>Listener</code> A listener listens for connection requests and distributes the requests to endpoints based on the port and protocol that you specify. Each listener is associated with an endpoint group. You can associate an endpoint group with a listener by specifying the region to which you want to distribute network traffic. After you associate an endpoint group with a listener, network traffic is distributed to optimal endpoints in the endpoint group.</li>
<li><code>Endpoint</code> Endpoints are destinations of client requests. Endpoints can be SLB instances, ECS instances, Alibaba Cloud public IP addresses, or IP addresses and domain names of origin servers outside of Alibaba Cloud.</li>
<li><code>Basic bandwidth plan</code> A basic bandwidth plan provides bandwidth for data transfer over the Internet and within internal networks of Alibaba Cloud. However, the basic bandwidth plan is not applicable to data transfer between Mainland China and areas outside of Mainland China.</li>
<li><code>Cross-border bandwidth plan</code> If you require data transfer acceleration between mainland China and areas outside mainland China, you must purchase a cross-border acceleration bandwidth plan.</li>
</ul>
<blockquote>
<p>Compared to Alibaba Cloud’s Cloud Enterprise Network <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/cen">CEN</a> service,<br>GA strictly focuses on accelerating public endpoints through Alibaba Cloud’s private backbone network whereas CEN focuses on peering virtual private cloud <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/product/27706.html">VPC</a> networks both inner- and intra-region wise. </p>
</blockquote>
<h2 id="Typical-Scenarios"><a href="#Typical-Scenarios" class="headerlink" title="Typical Scenarios"></a>Typical Scenarios</h2><h3 id="Cross-border-Acceleration"><a href="#Cross-border-Acceleration" class="headerlink" title="Cross-border Acceleration"></a>Cross-border Acceleration</h3><p><img src="ga_prod.jpg"><br>In this scenario, we will accelerate the access to a web-based endpoint (e.g. website or REST-API) that is hosted in Germany off of Alibaba Cloud from Mainland China.<br>The last-mile in Germany and Mainland China will both be served by the public internet. One the request hits the public endpoint of GA it is then transmitted through GA which is using Alibaba Cloud’s private backbone network which gives you a dedicated bandwidth you can set yourself and very low latency. For example, between Shanghai and Frankfurt we usually see latency of around 130ms. Generally, the end-to-end latency can be reduced by more than 40% based on our experience. You can do a performance test yourself as described in <a href="#faq">this example</a>.</p>
<p>GA will bring the following benefits:</p>
<ul>
<li>Decreased latency of end-to-end connections.</li>
<li>Network-security is improved since traffic is routed over Alibaba Cloud’s private backbone network.</li>
<li>Bandwidth can be guaranteed which is critical to enterprise-grade network environments.</li>
<li>Simple setup: one GA instance can support multiple accelerated IPs worldwide in different regions.</li>
</ul>
<h3 id="Cross-border-Acceleration-with-CDN"><a href="#Cross-border-Acceleration-with-CDN" class="headerlink" title="Cross-border Acceleration with CDN"></a>Cross-border Acceleration with CDN</h3><p><img src="ga_cdn.jpg"><br>In this scenario, a <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/dcdn">DCDN</a>(Dynamic Route of <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/cdn">CDN</a>) is deployed in front of the GA instance to improve the loading speed of static content even further. Static content such as images, videos, and scripts such as HTML, CSS, and Javascript, will be cached by CDN on nodes near clients. As of this writing Alibaba Cloud provides mpre than 2800 CDN nodes world-wide. Dynamic content will be routed through the GA connection.<br>If your static assets are already hosted on our object storage (OSS) you can also have your data automatically sync with any of our 23 OSS locations world-wide and direct your CDN to a localized origin. </p>
<p>For a deeper discussion on this topic please refer to <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/ga">Alibaba Cloud GA</a>.</p>
<h1 id="How-to-set-up-a-GA-instance-for-a-Proof-of-Concept-PoC"><a href="#How-to-set-up-a-GA-instance-for-a-Proof-of-Concept-PoC" class="headerlink" title="How to set up a GA instance for a Proof of Concept (PoC)"></a>How to set up a GA instance for a Proof of Concept (PoC)</h1><p><img src="ga_poc.jpg"><br>For a PoC, an additional reverse proxy is added that is hosted on an ECS instance in the service area on Alibaba Cloud. The reverse proxy is used as router to origin sites which takes care of filtering traffic and restricting domains that can be possibly reached from the accelerated IP. It also helps in defining more complex routing rules and HTTP modifications.</p>
<p>We recommend this architecture for any kind of production scenarios, or whenever you are in need for more complex routing rules for your backend endpoints. In particular, it enables you to:</p>
<ul>
<li>share a GA with multiple origin sites. Because GA currently does not support the routing of multiple domains or virtual hosts with the same port.</li>
<li>support high-availability (HA). We recommend to add a Service Load Balancer before two instances deployed on two different availability zones which both run an instance of the reverse proxy.</li>
</ul>
<p>The entire setup as described above can be deployed and configured in two ways:</p>
<ul>
<li>Option A: Fully automated through provisioning with Terraform scripts. Please see for <a target="_blank" rel="noopener" href="https://github.com/zchome/alicloud-ga-reverse-proxy">https://github.com/zchome/alicloud-ga-reverse-proxy</a> for instructions and code.</li>
<li>Option B: Manually, by using the Alibaba Cloud web console.</li>
</ul>
<p>The following resources will be created.<br><img src="ga_tf.jpg"></p>
<blockquote>
<p>Designed by Alibaba Cloud <a target="_blank" rel="noopener" href="https://cn.aliyun.com/product/developerservices/cadt">CADT</a>. For a beginner of Terraform or simple architecture, we recommend the Tool CADT. You can design your cloud environment and directly deploy all resources on Alibaba Cloud.</p>
</blockquote>
<p>Components</p>
<ul>
<li><code>GA</code> Global Accelerator with an accelerated IP in HongKong and back endpoints in Germany.</li>
<li><code>VPC</code> one Virtual Private Cloud <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/vpc">VPC</a> network for all resources.</li>
<li><code>vSwitch</code> two <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/doc-detail/65387.html">vSwitch</a> in two different Availability Zones for high availability HA.</li>
<li><code>SLB</code> one Server Load Balancer <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/server-load-balancer">SLB</a> instance for HA.</li>
<li><code>ECS</code> two Elastic Compute Service <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/ecs">ECS</a> instances for HA. ECS instance is used for deploying <code>NGINX</code> server as reverse proxy.</li>
<li><code>EIP</code> three Elastic IP <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/product/eip">EIP</a> for public network access. EIPs will be associated to ECS instance and SLB.</li>
</ul>
<h2 id="Terraform-scripts"><a href="#Terraform-scripts" class="headerlink" title="Terraform scripts"></a>Terraform scripts</h2><p>Download and checkout <a target="_blank" rel="noopener" href="https://github.com/zchome/alicloud-ga-reverse-proxy">https://github.com/zchome/alicloud-ga-reverse-proxy</a> from Github and follow the instructions of the project page.</p>
<ul>
<li>Install required tools locally, e.g. <code>Terraform</code>, <code>Terragrunt</code>.</li>
<li>Update the configuration file <code>common_vars.yaml</code> that lets you specify the accelerated and service region and bandwidth specification.</li>
<li>Export <code>ALICLOUD_ACCESS_KEY</code> <code>ALICLOUD_SECRET_KEY</code> <code>ALICLOUD_REGION</code> variables to your environment.</li>
<li>Execute <code>terragrunt run-all init</code> &amp; <code>terraform run-all apply</code> in the project’s root directory.<blockquote>
<p><code>Nginx</code> Reverse Proxy config is not include in the project, you can follow the guidance of <code>Nginx</code> config in <code>README.md</code>.</p>
</blockquote>
</li>
</ul>
<h2 id="Web-console"><a href="#Web-console" class="headerlink" title="Web console"></a>Web console</h2><p>We will go through the following configuration flow as depicted in below picture.<br><img src="ga_flow.png"></p>
<h3 id="Step-1-Create-a-GA-instance"><a href="#Step-1-Create-a-GA-instance" class="headerlink" title="Step 1: Create a GA instance"></a>Step 1: Create a GA instance</h3><p><img src="1_overview.png"><br><img src="2_create.png"><br>You can visit <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/doc-detail/153200.html">instances specification</a> for more information.</p>
<p><img src="6_purchase_bandwidth.png"><br>In <code>Bandwidth Manage</code> tab, you can manage a bandwidth package and assign it to a specific GA instance.</p>
<p><img src="6_purchase_basic_bandwidth.png"><br>If you want to accelerate traffic from Hong Kong region, you have to choose <code>Premium</code>.<br>You can visit <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/doc-detail/153204.html">bandwidth types</a> for more information.</p>
<p><img src="6_purchase_cross_bandwidth.png"><br>If you want to accelerate traffic from mainland China, you have to buy both <code>Cross-Border Bandwidth Plan</code> and <code>Basic Bandwidth Plan</code>.<br>You can visit <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/doc-detail/155111.html">cross-border bandwidth</a> for more information.</p>
<h3 id="Step-2-Add-Acceleration-Areas"><a href="#Step-2-Add-Acceleration-Areas" class="headerlink" title="Step 2: Add Acceleration Areas"></a>Step 2: Add Acceleration Areas</h3><p><img src="4_add_endpoint.png"></p>
<h3 id="Step-3-Add-listener"><a href="#Step-3-Add-listener" class="headerlink" title="Step 3: Add listener"></a>Step 3: Add listener</h3><p><img src="3_add_listener.png"><br><strong>Endpoint Group</strong> of listener is very important. It is the output endpoint of GA.<br>Please choose the same region of your backend services.</p>
<blockquote>
<p>Note: For different listeners, you can define different ports and protocols. </p>
</blockquote>
<h3 id="Monitor-Traffic-Over-GA"><a href="#Monitor-Traffic-Over-GA" class="headerlink" title="Monitor Traffic Over GA"></a>Monitor Traffic Over GA</h3><p><img src="ga_monitor_range.png"></p>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="Performance-Comparison"><a href="#Performance-Comparison" class="headerlink" title="Performance Comparison"></a>Performance Comparison</h2><p>For performance comparison, especially speed comparison, you can use the following command to measure the connection time and content loading.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -w <span class="string">&quot;@curl-format.txt&quot;</span> -H <span class="string">&quot;Cache-Control: no-cache&quot;</span> -o /dev/null https://www.accelerated.domain</span><br></pre></td></tr></table></figure>

<p>The following table shows an example comparison. You can use above command to test by yourself every several minutes. Then you can get an average value. </p>
<table>
<thead>
<tr>
<th>Time Measurement</th>
<th>Internet</th>
<th>GA + Self-Build Proxy</th>
</tr>
</thead>
<tbody><tr>
<td>Connect Time</td>
<td>1.607</td>
<td>0.064</td>
</tr>
<tr>
<td>Total Time</td>
<td>2.266</td>
<td>0.768</td>
</tr>
</tbody></table>
<h2 id="HTTP-HTTPS-or-TCP-UDP"><a href="#HTTP-HTTPS-or-TCP-UDP" class="headerlink" title="HTTP/HTTPS or TCP/UDP"></a>HTTP/HTTPS or TCP/UDP</h2><ul>
<li>GA supports layer 7 (Application Layer) protocols HTTP/HTTPS. For HTTPS you need to upload an SSL certificate. As a proxy, source IP can be added to http header if you enable <code>Client Affinity</code> feature.</li>
<li>GA supports layer 4 (Transport Layer) protocols TCP/UDP as well. Therefore almost all kinds of higher layer protocols or other application layer protocols can be supported. e.g. MQTT or Kafka protocols.</li>
</ul>
<p>If HTTPS protocol is chosen please use a valid SSL certificate in the <code>Listener</code> config.</p>
<p><img src="ga_https.png"></p>
<p>Before you choose an SSL certificate, you need to upload an existing SSL certificate or purchase an SSL certificate from Alibaba Cloud’s <code>Certificate Management Service</code>. </p>
<p><img src="certificate_ms.png"><br><img src="ga_https_listener_ssl.png"></p>
<p>On the <code>Endpoints</code> config of <code>HTTPS Listener</code>, you can choose HTTP or HTTPS as backend service. Additionally, you can map a requested port to other ports.</p>
<p><img src="ga_https_listener.png"></p>
<p>By using HTTPS protocol on GA, for different security requirement, you can choose one of following solutions.</p>
<p><img src="https.jpg"></p>
<ul>
<li>Option 1: HTTPS for public connection to GA where the SSL connection is terminated. Unencrypted HTTP connection to the backend services. If all servers are located on Alibaba Cloud, this option is usually sufficient for most scenarios.</li>
<li>Option 2: HTTPS in all phases meaning the SSL connection is only terminated at your origin servers which provides strict security protection. This is especially recommended if your origin servers are hosted off of Alibaba Cloud. </li>
</ul>
<h2 id="Endpoint-Group"><a href="#Endpoint-Group" class="headerlink" title="Endpoint Group"></a>Endpoint Group</h2><p>For example, when you add a <code>HTTP</code> listener with <code>HongKong</code> Endpoint,<br>following IPs will allocated to the endpoints.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Endpoint Group IPs (80)</span><br><span class="line">47.57.188.173</span><br><span class="line">47.57.136.213</span><br><span class="line">47.75.103.131</span><br><span class="line">47.57.68.66</span><br></pre></td></tr></table></figure>

<p>Log format</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log_format main &#x27;$remote_addr - $remote_user [$time_local] $host$request_uri &quot;$request&quot; &#x27;</span><br><span class="line">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br></pre></td></tr></table></figure>

<p>On the backend server, you will get the access log as following text. As an example, the following logs are retrieved from the reverse proxy server. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">47.57.188.173 - - [30/Nov/2021:23:38:15 +0800] ###########/login?next_url=/ &quot;GET /login?next_url=/ HTTP/1.1&quot; 200 59350 &quot;-&quot; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Safari/605.1.15&quot; &quot;188.174.62.87&quot;</span><br></pre></td></tr></table></figure>
<p>The IP <code>47.57.188.173</code> is one of listener endpoint group IPs. Due to <code>Client Affinity</code> feature is enabled, source IP is added in HTTP header and forward to backend servers.<br>The IP <code>188.174.62.87</code> is the source IP of end users who try to access accelerated domains.</p>
<p>If the reverse proxy server is located on Alibaba Cloud, you can use <code>Log Service (SLS)</code> to collect, store, analyze and visualize the log files.<br>With SLS, you can analyze requests and create dashboard to monitor high risk requests. Please visit <a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/en/product/28958.htm">Log Service</a> for more information.<br><img src="sls_rp_log.png"></p>
<h2 id="DNS-config"><a href="#DNS-config" class="headerlink" title="DNS config"></a>DNS config</h2><p><code>sub.domain.com</code> —(1)—&gt; GA <code>CNAME</code> or <code>Accelerated IP</code> —(2)—&gt; Origin Site</p>
<p>Set up customize domain on SaaS vendor portal.<br><img src="platformsh_cname.png"></p>
<p>If required, please upload ssl certificate to the SaaS vendor.<br><img src="platformsh_ssl.png"></p>
<p>Update DNS record with GA <code>CNAME</code> or <code>Accelerated IP</code>.<br><img src="dns_record.png"></p>
<p>Config traffic to origin site.<br><img src="ga_endpoint_ip.png"></p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Global Accelerator is the most simple and cost efficient solution to accelerate public network access and increasing the network reliability at the same time, including any connections to and from Mainland China.<br>Additionally, GA is easy to deploy and to configure and is usually setup in short time. We also provide Terraform scripts that will automate the entire provisioning as described in this blog post earlier.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Cheng Zhang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://blog.mucdata.com/2022/02/07/ga/">https://blog.mucdata.com/2022/02/07/ga/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ga/">ga</a><a class="post-meta__tags" href="/tags/global-accelerator/">global accelerator</a><a class="post-meta__tags" href="/tags/cdn/">cdn</a></div><div class="post_share"><div class="social-share" data-image="/img/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="Wechat Pay"/></a><div class="post-qr-code-desc">Wechat Pay</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="Alipay"/></a><div class="post-qr-code-desc">Alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/02/08/cloudsso/"><img class="prev-cover" src="/img/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Multiple Accounts with CloudSSO Solution</div></div></a></div><div class="next-post pull-right"><a href="/2021/10/22/idaas/"><img class="next-cover" src="/img/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Alibaba Cloud IDaaS</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Cheng Zhang</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">5</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zchome/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.linkedin.com/in/zchome/" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://github.com/zchome/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:cheng.zhang@mucdata.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is a Cloud Architecture Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Using-Global-Accelerator-to-speed-up-internet-services-worldwide"><span class="toc-number">1.</span> <span class="toc-text">Using Global Accelerator to speed up internet services worldwide</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Why-Global-Accelerator"><span class="toc-number">2.</span> <span class="toc-text">Why Global Accelerator</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Cross-border-connectivity-to-Mainland-China"><span class="toc-number">2.1.</span> <span class="toc-text">Cross-border connectivity to Mainland China</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#What-is-Global-Accelerator-GA"><span class="toc-number">3.</span> <span class="toc-text">What is Global Accelerator (GA)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Typical-Scenarios"><span class="toc-number">3.1.</span> <span class="toc-text">Typical Scenarios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cross-border-Acceleration"><span class="toc-number">3.1.1.</span> <span class="toc-text">Cross-border Acceleration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cross-border-Acceleration-with-CDN"><span class="toc-number">3.1.2.</span> <span class="toc-text">Cross-border Acceleration with CDN</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-set-up-a-GA-instance-for-a-Proof-of-Concept-PoC"><span class="toc-number">4.</span> <span class="toc-text">How to set up a GA instance for a Proof of Concept (PoC)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Terraform-scripts"><span class="toc-number">4.1.</span> <span class="toc-text">Terraform scripts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-console"><span class="toc-number">4.2.</span> <span class="toc-text">Web console</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-1-Create-a-GA-instance"><span class="toc-number">4.2.1.</span> <span class="toc-text">Step 1: Create a GA instance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-2-Add-Acceleration-Areas"><span class="toc-number">4.2.2.</span> <span class="toc-text">Step 2: Add Acceleration Areas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-3-Add-listener"><span class="toc-number">4.2.3.</span> <span class="toc-text">Step 3: Add listener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Monitor-Traffic-Over-GA"><span class="toc-number">4.2.4.</span> <span class="toc-text">Monitor Traffic Over GA</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FAQ"><span class="toc-number">5.</span> <span class="toc-text">FAQ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Performance-Comparison"><span class="toc-number">5.1.</span> <span class="toc-text">Performance Comparison</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-HTTPS-or-TCP-UDP"><span class="toc-number">5.2.</span> <span class="toc-text">HTTP&#x2F;HTTPS or TCP&#x2F;UDP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Endpoint-Group"><span class="toc-number">5.3.</span> <span class="toc-text">Endpoint Group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS-config"><span class="toc-number">5.4.</span> <span class="toc-text">DNS config</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Conclusion"><span class="toc-number">6.</span> <span class="toc-text">Conclusion</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/02/08/cloudsso/" title="Multiple Accounts with CloudSSO Solution"><img src="/img/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Multiple Accounts with CloudSSO Solution"/></a><div class="content"><a class="title" href="/2022/02/08/cloudsso/" title="Multiple Accounts with CloudSSO Solution">Multiple Accounts with CloudSSO Solution</a><time datetime="2022-02-08T18:00:00.000Z" title="Created 2022-02-08 19:00:00">2022-02-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/07/ga/" title="Global Accelerator Solution"><img src="/img/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Global Accelerator Solution"/></a><div class="content"><a class="title" href="/2022/02/07/ga/" title="Global Accelerator Solution">Global Accelerator Solution</a><time datetime="2022-02-07T17:00:00.000Z" title="Created 2022-02-07 18:00:00">2022-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/22/idaas/" title="Alibaba Cloud IDaaS"><img src="/img/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Alibaba Cloud IDaaS"/></a><div class="content"><a class="title" href="/2021/10/22/idaas/" title="Alibaba Cloud IDaaS">Alibaba Cloud IDaaS</a><time datetime="2021-10-22T13:00:00.000Z" title="Created 2021-10-22 15:00:00">2021-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/22/mpaas/" title="Alibaba Cloud mPaaS"><img src="/img/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Alibaba Cloud mPaaS"/></a><div class="content"><a class="title" href="/2021/10/22/mpaas/" title="Alibaba Cloud mPaaS">Alibaba Cloud mPaaS</a><time datetime="2021-10-22T13:00:00.000Z" title="Created 2021-10-22 15:00:00">2021-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/22/sso/" title="SSO Solution"><img src="/img/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSO Solution"/></a><div class="content"><a class="title" href="/2021/10/22/sso/" title="SSO Solution">SSO Solution</a><time datetime="2021-10-22T07:00:00.000Z" title="Created 2021-10-22 09:00:00">2021-10-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Cheng Zhang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://blog.mucdata.com/2022/02/07/ga/'
    this.page.identifier = '2022/02/07/ga/'
    this.page.title = 'Global Accelerator Solution'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://zchome.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div></div></body></html>